(this["webpackJsonppeace-of-mind"]=this["webpackJsonppeace-of-mind"]||[]).push([[0],{170:function(e,a,t){"use strict";t.r(a);var s=t(2),n=t(52),c=t.n(n),r=t(11),l=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,171)).then((function(a){var t=a.getCLS,s=a.getFID,n=a.getFCP,c=a.getLCP,r=a.getTTFB;t(e),s(e),n(e),c(e),r(e)}))},i=t(4),o=t(3),j=(t(60),t(61),t(15)),d=t.n(j),b="https://peace-of-mind-backend.herokuapp.com/v1/",m=function(e,a,t){return d.a.post(b+"usuarios",{username:e,email:a,password:t})},u=function(e,a){return d.a.post(b+"/usuarios/entrar",{username:e,password:a}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},O=function(){localStorage.removeItem("user")},h=function(){return JSON.parse(localStorage.getItem("user"))},x=t(21),v=t.n(x),f=t(13),p=t.n(f),g=t(22),N=t.n(g),S=t(0),k=function(e){if(!e)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){var a=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(""),c=Object(i.a)(n,2),r=c[0],l=c[1],o=Object(s.useState)(""),j=Object(i.a)(o,2),d=j[0],b=j[1],m=Object(s.useState)(!1),O=Object(i.a)(m,2),h=O[0],x=O[1],f=Object(s.useState)(""),g=Object(i.a)(f,2),w=g[0],T=g[1];return Object(S.jsx)("div",{className:"col-md-12",children:Object(S.jsxs)("div",{className:"card card-container",children:[Object(S.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(S.jsxs)(v.a,{onSubmit:function(s){s.preventDefault(),T(""),x(!0),a.current.validateAll(),0===t.current.context._errors.length?u(r,d).then((function(){e.history.push("/profile"),window.location.reload()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();x(!1),T(a)})):x(!1)},ref:a,children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"username",children:"Username"}),Object(S.jsx)(p.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var a=e.target.value;l(a)},validations:[k]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)(p.a,{type:"password",className:"form-control",name:"password",value:d,onChange:function(e){var a=e.target.value;b(a)},validations:[k]})]}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsxs)("button",{className:"btn btn-primary btn-block",disabled:h,children:[h&&Object(S.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(S.jsx)("span",{children:"Login"})]})}),w&&Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:w})}),Object(S.jsx)(N.a,{style:{display:"none"},ref:t})]})]})})},T=t(53),y=function(e){if(!e)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},E=function(e){if(!Object(T.isEmail)(e))return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},C=function(e){if(e.length<3||e.length>20)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},F=function(e){if(e.length<6||e.length>40)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},I=function(e){var a=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(""),c=Object(i.a)(n,2),r=c[0],l=c[1],o=Object(s.useState)(""),j=Object(i.a)(o,2),d=j[0],b=j[1],u=Object(s.useState)(""),O=Object(i.a)(u,2),h=O[0],x=O[1],f=Object(s.useState)(!1),g=Object(i.a)(f,2),k=g[0],w=g[1],T=Object(s.useState)(""),I=Object(i.a)(T,2),R=I[0],A=I[1];return Object(S.jsx)("div",{className:"col-md-12",children:Object(S.jsxs)("div",{className:"card card-container",children:[Object(S.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(S.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),A(""),w(!1),a.current.validateAll(),0===t.current.context._errors.length&&m(r,d,h).then((function(e){A(e.data.message),w(!0)}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();A(a),w(!1)}))},ref:a,children:[!k&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"username",children:"Username"}),Object(S.jsx)(p.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var a=e.target.value;l(a)},validations:[y,C]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"email",children:"Email"}),Object(S.jsx)(p.a,{type:"text",className:"form-control",name:"email",value:d,onChange:function(e){var a=e.target.value;b(a)},validations:[y,E]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)(p.a,{type:"password",className:"form-control",name:"password",value:h,onChange:function(e){var a=e.target.value;x(a)},validations:[y,F]})]}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),R&&Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("div",{className:k?"alert alert-success":"alert alert-danger",role:"alert",children:R})}),Object(S.jsx)(N.a,{style:{display:"none"},ref:t})]})]})})};function R(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var A="https://peace-of-mind-backend.herokuapp.com/v1/",L=function(){return d.a.get(A+"enfermedades")},_=function(){return d.a.get(A+"user",{headers:R()})},B=function(){var e=Object(s.useState)(""),a=Object(i.a)(e,2),t=a[0],n=a[1];return Object(s.useEffect)((function(){L().then((function(e){n(e.data)}),(function(e){var a=e.response&&e.response.data||e.message||e.toString();n(a)}))}),[]),Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsx)("h3",{children:t})})})},D=function(){var e=h();return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsxs)("h3",{children:[Object(S.jsx)("strong",{children:e.username})," Profile"]})}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(S.jsx)("strong",{children:"Authorities:"}),Object(S.jsx)("ul",{children:e.roles&&e.roles.map((function(e,a){return Object(S.jsx)("li",{children:e},a)}))})]})},J=function(){var e=Object(s.useState)(""),a=Object(i.a)(e,2),t=a[0],n=a[1];return Object(s.useEffect)((function(){_().then((function(e){n(e.data)}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(a)}))}),[]),Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsx)("h3",{children:t})})})},P=function(){var e=Object(s.useState)(!1),a=Object(i.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)(!1),l=Object(i.a)(c,2),j=l[0],d=l[1],b=Object(s.useState)(void 0),m=Object(i.a)(b,2),u=m[0],x=m[1];Object(s.useEffect)((function(){var e=h();e&&(x(e),n(e.roles.includes("ROLE_MODERATOR")),d(e.roles.includes("ROLE_ADMIN")))}),[]);return Object(S.jsxs)("div",{children:[Object(S.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(S.jsx)(r.b,{to:"/",className:"navbar-brand",children:"bezKoder"}),Object(S.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/home",className:"nav-link",children:"Home"})}),t&&Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),j&&Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),u&&Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/user",className:"nav-link",children:"User"})})]}),u?Object(S.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/profile",className:"nav-link",children:u.username})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)("a",{href:"/login",className:"nav-link",onClick:function(){O()},children:"LogOut"})})]}):Object(S.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(r.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(S.jsx)("div",{className:"container mt-3",children:Object(S.jsxs)(o.c,{children:[Object(S.jsx)(o.a,{exact:!0,path:["/","/home"],component:B}),Object(S.jsx)(o.a,{exact:!0,path:"/login",component:w}),Object(S.jsx)(o.a,{exact:!0,path:"/register",component:I}),Object(S.jsx)(o.a,{exact:!0,path:"/profile",component:D}),Object(S.jsx)(o.a,{path:"/user",component:J})]})})]})};c.a.render(Object(S.jsx)(r.a,{children:Object(S.jsx)(P,{})}),document.getElementById("root")),l()},61:function(e,a,t){}},[[170,1,2]]]);
//# sourceMappingURL=main.44e9b89c.chunk.js.map
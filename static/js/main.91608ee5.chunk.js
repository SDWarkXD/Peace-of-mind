(this["webpackJsonppeace-of-mind"]=this["webpackJsonppeace-of-mind"]||[]).push([[0],{42:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(33),r=a.n(s),c=a(11),o=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))},i=a(3),l=a(2),j=(a(41),a(42),a(13)),d=a.n(j),b="https://peace-of-mind-backend.herokuapp.com/v1/",u=function(e,t,a,n,s){return d.a.post(b+"usuarios",{nombre:e,apellidos:t,usuario:a,password:n,tipoUsuario:s}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},m=function(e,t){return d.a.post(b+"/usuarios/entrar",{usuario:e,password:t}).then((function(e){return console.log(e),e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},h=function(){localStorage.removeItem("user")},O=function(){return JSON.parse(localStorage.getItem("user"))},p=a(18),v=a.n(p),x=a(10),f=a.n(x),g=a(19),N=a.n(g),S=a(0),k=function(e){if(!e)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1],l=Object(n.useState)(""),j=Object(i.a)(l,2),d=j[0],b=j[1],u=Object(n.useState)(!1),h=Object(i.a)(u,2),O=h[0],p=h[1],x=Object(n.useState)(""),g=Object(i.a)(x,2),w=g[0],y=g[1];return Object(S.jsx)("div",{className:"col-md-12",children:Object(S.jsxs)("div",{className:"card card-container",children:[Object(S.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(S.jsxs)(v.a,{onSubmit:function(n){n.preventDefault(),y(""),p(!0),t.current.validateAll(),0===a.current.context._errors.length?m(c,d).then((function(){e.history.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();p(!1),y(t)})):p(!1)},ref:t,children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"username",children:"Username"}),Object(S.jsx)(f.a,{type:"text",className:"form-control",name:"username",value:c,onChange:function(e){var t=e.target.value;o(t)},validations:[k]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)(f.a,{type:"password",className:"form-control",name:"password",value:d,onChange:function(e){var t=e.target.value;b(t)},validations:[k]})]}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsxs)("button",{className:"btn btn-primary btn-block",disabled:O,children:[O&&Object(S.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(S.jsx)("span",{children:"Login"})]})}),w&&Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:w})}),Object(S.jsx)(N.a,{style:{display:"none"},ref:a})]})]})})},y=a(34),C=a.n(y),F=function(e){if(!e)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},T=function(e){if(e.length<3||e.length>20)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},U=function(e){if(e.length<6||e.length>40)return Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},I=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1],l=Object(n.useState)(""),j=Object(i.a)(l,2),d=j[0],b=j[1],m=Object(n.useState)(""),h=Object(i.a)(m,2),O=h[0],p=h[1],x=Object(n.useState)(""),g=Object(i.a)(x,2),k=g[0],w=g[1],y=Object(n.useState)(""),I=Object(i.a)(y,2),J=I[0],P=I[1],A=Object(n.useState)(!1),E=Object(i.a)(A,2),L=E[0],B=E[1],D=Object(n.useState)(""),R=Object(i.a)(D,2),_=R[0],q=R[1];return Object(S.jsx)("div",{className:"col-md-12",children:Object(S.jsxs)("div",{className:"card card-container",children:[Object(S.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(S.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),q(""),B(!1),t.current.validateAll(),0===a.current.context._errors.length&&u(c,d,k,J,O).then((function(e){q(e.usuario),B(!0)}),(function(e){var t=e.response&&e.response.usuario||e.message||e.toString();q(t),B(!1)}))},ref:t,children:[!L&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"nombre",children:"Nombre"}),Object(S.jsx)(f.a,{type:"text",className:"form-control",name:"nombre",value:c,onChange:function(e){var t=e.target.value;o(t)}})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"apellidos",children:"Apellidos"}),Object(S.jsx)(f.a,{type:"text",className:"form-control",name:"apellidos",value:d,onChange:function(e){var t=e.target.value;b(t)}})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"tipoUsuario",children:"Tipo de Usuario"}),Object(S.jsxs)(C.a,{name:"tipoUsuario",className:"form-control",value:O,onChange:function(e){var t=e.target.value;p(t)},validations:[F],children:[Object(S.jsx)("option",{value:"indirecto",children:"Indirecto"}),Object(S.jsx)("option",{value:"directo",children:"Directo"}),Object(S.jsx)("option",{value:"externo",children:"Externo"})]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"username",children:"Username"}),Object(S.jsx)(f.a,{type:"text",className:"form-control",name:"username",value:k,onChange:function(e){var t=e.target.value;w(t)},validations:[F,T]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)(f.a,{type:"password",className:"form-control",name:"password",value:J,onChange:function(e){var t=e.target.value;P(t)},validations:[F,U]})]}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),_&&Object(S.jsx)("div",{className:"form-group",children:Object(S.jsxs)("div",{className:L?"alert alert-success":"alert alert-danger",role:"alert",children:["Bienvenido ",_]})}),Object(S.jsx)(N.a,{style:{display:"none"},ref:a})]})]})})};function J(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var P="https://peace-of-mind-backend.herokuapp.com/v1/",A=function(){return fetch(P+"enfermedades").then((function(e){return e.json()}))},E=function(){return d.a.get(P+"user",{headers:J()})},L=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){A().then((function(e){s(e[0].nombre),console.log(e)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();s(t)}))}),[]),Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsx)("h3",{children:a})})})},B=function(){var e=O();return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsxs)("h3",{children:[Object(S.jsx)("strong",{children:"Perfil"})," ",e.usuario]})}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Token:"})," ",e.token.substring(0,20)," ..."," ",e.token.substr(e.token.length-20)]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Nombre:"})," ",e.nombre]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Apellidos:"})," ",e.apellidos]}),Object(S.jsx)("strong",{children:"Tipo de usuario:"})," ",e.tipoUsuario]})},D=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){E().then((function(e){s(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();s(t)}))}),[]),Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("header",{className:"jumbotron",children:Object(S.jsx)("h3",{children:a})})})},R=function(){var e=Object(n.useState)(void 0),t=Object(i.a)(e,2),a=t[0],s=t[1];Object(n.useEffect)((function(){var e=O();e&&s(e)}),[]);return Object(S.jsxs)("div",{children:[Object(S.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(S.jsx)(c.b,{to:"/",className:"navbar-brand",children:"Peace of Mind"}),Object(S.jsx)("div",{className:"navbar-nav mr-auto",children:Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(c.b,{to:"/home",className:"nav-link",children:"Home"})})}),a?Object(S.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(c.b,{to:"/profile",className:"nav-link",children:a.nombre})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)("a",{href:"/login",className:"nav-link",onClick:function(){h()},children:"LogOut"})})]}):Object(S.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(c.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(c.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(S.jsx)("div",{className:"container mt-3",children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:["/","/home"],component:L}),Object(S.jsx)(l.a,{exact:!0,path:"/login",component:w}),Object(S.jsx)(l.a,{exact:!0,path:"/register",component:I}),Object(S.jsx)(l.a,{exact:!0,path:"/profile",component:B}),Object(S.jsx)(l.a,{path:"/user",component:D})]})})]})};r.a.render(Object(S.jsx)(c.a,{children:Object(S.jsx)(R,{})}),document.getElementById("root")),o()}},[[70,1,2]]]);
//# sourceMappingURL=main.91608ee5.chunk.js.map